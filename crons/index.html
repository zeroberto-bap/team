<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>CRONs BAP â€” Dashboard</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,Segoe UI,Arial,sans-serif;background:#0b1220;color:#e5e7eb}
.wrap{max-width:1200px;margin:0 auto;padding:24px 16px}
h1{font-size:22px;margin-bottom:4px}
.sub{color:#64748b;font-size:12px;margin-bottom:20px}
.card{background:#111a2e;border:1px solid #1e2d47;border-radius:12px;padding:18px;margin-bottom:18px}
.card-title{font-size:14px;font-weight:700;margin-bottom:14px;display:flex;align-items:center;gap:8px}
.grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.kpi{background:#0b1220;border:1px solid #1e2d47;border-radius:10px;padding:12px;text-align:center}
.kpi b{font-size:28px;display:block;line-height:1.1}
.kpi small{font-size:11px;color:#64748b;margin-top:3px;display:block}
.ok{color:#22c55e}.warn{color:#f59e0b}.bad{color:#ef4444}.info{color:#38bdf8}.run{color:#f97316}
/* Categorias */
.cat{margin-bottom:24px}
.cat-header{display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #1e2d47}
.cat-icon{font-size:20px}
.cat-name{font-size:16px;font-weight:700}
.cat-count{font-size:11px;color:#64748b;margin-left:auto}
.cron-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:10px}
.cron-card{background:#0b1220;border:1px solid #1e2d47;border-radius:10px;padding:14px;position:relative}
.cron-card.cat-sistema{border-left:3px solid #38bdf8}
.cron-card.cat-bap{border-left:3px solid #22c55e}
.cron-card.cat-cdmp{border-left:3px solid #a78bfa}
.cron-card.cat-multi{border-left:3px solid #f59e0b}
.cron-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:6px}
.cron-name{font-weight:700;font-size:13px;line-height:1.3}
.cron-id{font-size:10px;color:#475569;font-family:monospace}
.badge{padding:2px 8px;border-radius:999px;font-size:10px;font-weight:700;white-space:nowrap}
.b-ok{background:#14532d;color:#86efac}
.b-warn{background:#78350f;color:#fcd34d}
.b-never{background:#1e3a5f;color:#93c5fd}
.b-prod{background:#14532d;color:#4ade80;border:1px solid #22c55e}
.b-run{background:#7c2d12;color:#fdba74}
.cron-desc{font-size:11px;color:#94a3b8;margin:6px 0}
.cron-meta{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.tag{font-size:10px;background:#1e2d47;padding:2px 7px;border-radius:6px;color:#94a3b8}
.tag.sched{color:#93c5fd}
.tag.dest{color:#a5f3fc}
.tag.prox{color:#86efac}
.tag.alert{color:#fcd34d}
/* CalendÃ¡rio */
.cal-wrap{overflow-x:auto}
.cal{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;min-width:700px}
.cal-head{background:#1e2d47;border-radius:6px;padding:6px;text-align:center;font-size:11px;font-weight:700;color:#93c5fd}
.day{background:#0b1220;border:1px solid #1e2d47;border-radius:8px;min-height:80px;padding:6px}
.day.today{border-color:#38bdf8}
.day .dn{font-size:11px;color:#64748b;margin-bottom:4px}
.day.today .dn{color:#38bdf8;font-weight:700}
.ev{display:block;font-size:9px;padding:2px 5px;border-radius:4px;margin:1px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ev.s{background:#0c2a4a;border-left:2px solid #38bdf8;color:#93c5fd}
.ev.b{background:#052e16;border-left:2px solid #22c55e;color:#86efac}
.ev.c{background:#2e1065;border-left:2px solid #a78bfa;color:#c4b5fd}
.ev.m{background:#451a03;border-left:2px solid #f59e0b;color:#fcd34d}
/* Gate */
#gate{position:fixed;inset:0;background:#020617;display:flex;align-items:center;justify-content:center;z-index:99}
#box{background:#0f172a;border:1px solid #1e2d47;border-radius:14px;padding:28px;width:360px;text-align:center}
#box h3{margin-bottom:6px;font-size:18px}
.hint{color:#64748b;font-size:12px;margin-bottom:16px}
input{width:100%;padding:10px 14px;border-radius:8px;border:1px solid #1e2d47;background:#020617;color:#e5e7eb;font-size:14px;margin-bottom:10px}
button{width:100%;padding:10px;border-radius:8px;border:0;background:#2563eb;color:white;font-weight:700;cursor:pointer;font-size:14px}
button:hover{background:#1d4ed8}
.err{color:#f87171;font-size:12px;margin-top:6px;min-height:18px}
</style>
</head>
<body>
<div id="gate">
  <div id="box">
    <div style="font-size:32px;margin-bottom:8px">ğŸ¤–</div>
    <h3>CRONs BAP</h3>
    <div class="hint">Dashboard de atividades programadas</div>
    <input id="pwd" type="password" placeholder="Senha" onkeydown="if(event.key==='Enter')unlock()"/>
    <button onclick="unlock()">Entrar</button>
    <div class="err" id="err"></div>
  </div>
</div>

<div class="wrap" id="content" style="display:none">
  <h1>ğŸ¤– CRONs BAP â€” Painel de Atividades</h1>
  <div class="sub">Atualizado: 25/02/2026 Â· Timezone: America/New_York Â· 11 crons ativos</div>

  <!-- KPIs -->
  <div class="card">
    <div class="card-title">ğŸ“Š Status Geral</div>
    <div class="grid4">
      <div class="kpi"><b class="ok">7</b><small>âœ… OK / PROD</small></div>
      <div class="kpi"><b class="ok">0</b><small>âš ï¸ AtenÃ§Ã£o</small></div>
      <div class="kpi"><b class="info">4</b><small>â³ Nunca rodou</small></div>
      <div class="kpi"><b style="color:#a78bfa">4</b><small>ğŸ“ Categorias</small></div>
    </div>
  </div>

  <!-- CalendÃ¡rio MarÃ§o -->
  <div class="card">
    <div class="card-title">ğŸ“… CalendÃ¡rio â€” MarÃ§o/2026</div>
    <div class="hint" style="margin-bottom:10px;color:#64748b;font-size:11px">
      <span class="ev s" style="display:inline-block;margin-right:8px">Sistema</span>
      <span class="ev b" style="display:inline-block;margin-right:8px">BAP</span>
      <span class="ev c" style="display:inline-block;margin-right:8px">CDMP</span>
      <span class="ev m" style="display:inline-block">Multi Seguros</span>
    </div>
    <div class="cal-wrap">
      <div class="cal" id="cal"></div>
    </div>
  </div>

  <!-- CATEGORIA: SISTEMA -->
  <div class="cat">
    <div class="cat-header">
      <span class="cat-icon">ğŸ–¥ï¸</span>
      <span class="cat-name" style="color:#38bdf8">Sistema &amp; Infraestrutura</span>
      <span class="cat-count">5 crons</span>
    </div>
    <div class="cron-grid">

      <div class="cron-card cat-sistema">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ”„ OpenClaw Update Check</div>
            <div class="cron-id">03988345</div>
          </div>
          <span class="badge b-ok">âœ… OK</span>
        </div>
        <div class="cron-desc">Verifica se hÃ¡ update do OpenClaw. Se houver, atualiza e notifica no Telegram. Sem update â†’ silencioso.</div>
        <div class="cron-meta">
          <span class="tag sched">â° DiÃ¡rio 2:55h AM</span>
          <span class="tag dest">ğŸ“¨ Telegram Rafael (sÃ³ se atualizar)</span>
          <span class="tag prox">â–¶ Todo dia</span>
        </div>
      </div>

      <div class="cron-card cat-sistema">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ’¾ Backup Noturno Drive</div>
            <div class="cron-id">b389e54d</div>
          </div>
          <span class="badge b-ok">âœ… OK</span>
        </div>
        <div class="cron-desc">ZIP do workspace â†’ upload Google Drive â†’ cleanup arquivos &gt;7 dias. Ãšltimo: 24/02 em 24s.</div>
        <div class="cron-meta">
          <span class="tag sched">â° DiÃ¡rio 3h AM</span>
          <span class="tag dest">ğŸ“ Google Drive</span>
          <span class="tag prox">â–¶ Todo dia</span>
        </div>
      </div>

      <div class="cron-card cat-sistema">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ”’ Security: Gateway Weekly</div>
            <div class="cron-id">1b6a94e9</div>
          </div>
          <span class="badge b-ok">âœ… OK</span>
        </div>
        <div class="cron-desc">Checagem semanal: bind localhost, autenticaÃ§Ã£o, portas abertas, permissÃµes ~/.openclaw. Ãšltimo: 22/02.</div>
        <div class="cron-meta">
          <span class="tag sched">â° Segunda 2h AM</span>
          <span class="tag dest">ğŸ“¨ Telegram se anomalia</span>
          <span class="tag prox">â–¶ 02/03</span>
        </div>
      </div>

      <div class="cron-card cat-sistema">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ” Security: Monthly Scan</div>
            <div class="cron-id">cdea8d70</div>
          </div>
          <span class="badge b-never">â³ NUNCA</span>
        </div>
        <div class="cron-desc">Varredura mensal por tokens/senhas expostos em memÃ³ria e scripts. Verifica workspace size e permissÃµes.</div>
        <div class="cron-meta">
          <span class="tag sched">â° Dia 1, 4h AM</span>
          <span class="tag dest">ğŸ“¨ Telegram Rafael</span>
          <span class="tag prox">â–¶ 01/03</span>
        </div>
      </div>

      <div class="cron-card cat-sistema">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ›¡ï¸ Security: Healthcheck</div>
            <div class="cron-id">e2e2de71</div>
          </div>
          <span class="badge b-never">â³ NUNCA</span>
        </div>
        <div class="cron-desc">Auditoria profunda: CVEs, firewall macOS, portas, permissÃµes. Pesquisa vulnerabilidades recentes.</div>
        <div class="cron-meta">
          <span class="tag sched">â° A cada 10 dias</span>
          <span class="tag dest">ğŸ“¨ Telegram Rafael</span>
          <span class="tag prox">â–¶ 26/02</span>
        </div>
      </div>

    </div>
  </div>

  <!-- CATEGORIA: BAP -->
  <div class="cat">
    <div class="cat-header">
      <span class="cat-icon">ğŸ¢</span>
      <span class="cat-name" style="color:#22c55e">BAP â€” RelatÃ³rios &amp; Monitoramento</span>
      <span class="cat-count">4 crons</span>
    </div>
    <div class="cron-grid">

      <div class="cron-card cat-bap">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ—ºï¸ Roadmap BAP Live 2026</div>
            <div class="cron-id">e76f594d</div>
          </div>
          <span class="badge b-ok">âœ… OK</span>
        </div>
        <div class="cron-desc">Baixa planilha ao vivo (Playwright), processa 65 itens por status/GUT/setor, gera PDF e envia. Ãšltimo: 23/02 em 173s.</div>
        <div class="cron-meta">
          <span class="tag sched">â° Segunda 3h AM</span>
          <span class="tag dest">ğŸ“§ Rafael, Guilherme, Pedro, Aguiar</span>
          <span class="tag prox">â–¶ 02/03</span>
        </div>
      </div>

      <div class="cron-card cat-bap">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ“Š CRM BAP â€” Semanal</div>
            <div class="cron-id">aa0757dc</div>
          </div>
          <span class="badge b-prod">ğŸš€ PROD</span>
        </div>
        <div class="cron-desc">Ãšltimos 7 dias do RD CRM. Filtra imÃ³vel/Airbnb/usuÃ¡rios automÃ¡ticos. Enriquece deals em paralelo. 151 ativ. esta semana.</div>
        <div class="cron-meta">
          <span class="tag sched">â° TerÃ§a 17h ET</span>
          <span class="tag dest">ğŸ“§ Rafael, Pedro</span>
          <span class="tag prox">â–¶ 03/03</span>
        </div>
      </div>

      <div class="cron-card cat-bap">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸª Monitor Reclame Aqui</div>
            <div class="cron-id">b463b438</div>
          </div>
          <span class="badge b-prod">ğŸš€ PROD</span>
        </div>
        <div class="cron-desc">27 empresas (26 concorrentes + BAP). Filtra 15 dias. BAP em seÃ§Ã£o separada. Tempo: ~75-90s. Cloudflare â†’ browser CDP.</div>
        <div class="cron-meta">
          <span class="tag sched">â° A cada 15 dias</span>
          <span class="tag dest">ğŸ“§ Rafael, Pedro, Herb</span>
          <span class="tag prox">â–¶ 11/03</span>
        </div>
      </div>

      <div class="cron-card cat-bap">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ“ RelatÃ³rio Consultores</div>
            <div class="cron-id">f7a2498a</div>
          </div>
          <span class="badge b-never">â³ NUNCA</span>
        </div>
        <div class="cron-desc">Pipeline financeiro completo. ~800 chamadas API LiveFacilities. Dura ~25min. Gera dashboard HTML e envia por email.</div>
        <div class="cron-meta">
          <span class="tag sched">â° Dia 14, 7h AM</span>
          <span class="tag dest">ğŸ“§ Rafael</span>
          <span class="tag prox">â–¶ 14/03</span>
          <span class="tag alert">âš ï¸ Dry-run antes</span>
        </div>
      </div>

    </div>
  </div>

  <!-- CATEGORIA: CDMP -->
  <div class="cat">
    <div class="cat-header">
      <span class="cat-icon">ğŸ“‹</span>
      <span class="cat-name" style="color:#a78bfa">CDMP â€” CobranÃ§a e PriorizaÃ§Ã£o</span>
      <span class="cat-count">1 cron</span>
    </div>
    <div class="cron-grid">

      <div class="cron-card cat-cdmp">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ“‹ CDMP â€” RelatÃ³rio Semanal</div>
            <div class="cron-id">42a093e4</div>
          </div>
          <span class="badge b-ok">âœ… PROD</span>
        </div>
        <div class="cron-desc">Classifica moradores por dias sem contato: ğŸ”´ CRÃTICO (15+d), ğŸŸ¡ ATENÃ‡ÃƒO (10-14d), ğŸŸ¢ NORMAL (&lt;10d). Gera PDF e envia.</div>
        <div class="cron-meta">
          <span class="tag sched">â° Segunda 17h ET</span>
          <span class="tag dest">ğŸ“§ Herb, Steph, Pedro, Rafael</span>
          <span class="tag prox">â–¶ 02/03</span>
          <span class="tag ok">âœ… Em produÃ§Ã£o (dry-run 25/02)</span>
        </div>
      </div>

    </div>
  </div>

  <!-- CATEGORIA: MULTI SEGUROS -->
  <div class="cat">
    <div class="cat-header">
      <span class="cat-icon">ğŸ›¡ï¸</span>
      <span class="cat-name" style="color:#f59e0b">Multi Seguros</span>
      <span class="cat-count">1 cron</span>
    </div>
    <div class="cron-grid">

      <div class="cron-card cat-multi">
        <div class="cron-top">
          <div>
            <div class="cron-name">ğŸ›¡ï¸ Multi Seguros â€” Mensal</div>
            <div class="cron-id">0c6b0280</div>
          </div>
          <span class="badge b-never">â³ NUNCA</span>
        </div>
        <div class="cron-desc">RelatÃ³rio mensal de apÃ³lices: prÃªmios, comissÃµes, taxa de conversÃ£o. Baixa planilha Drive, processa, gera PDF.</div>
        <div class="cron-meta">
          <span class="tag sched">â° Dia 10, 4h AM</span>
          <span class="tag dest">ğŸ“§ Rafael, Tavares (Multi)</span>
          <span class="tag prox">â–¶ 10/03</span>
          <span class="tag alert">âš ï¸ Dry-run antes</span>
        </div>
      </div>

    </div>
  </div>

</div><!-- /wrap -->

<script>
const PASSWORD = "crons26";
function unlock(){
  if(document.getElementById('pwd').value === PASSWORD){
    document.getElementById('gate').style.display='none';
    document.getElementById('content').style.display='block';
  } else {
    document.getElementById('err').textContent='Senha invÃ¡lida.';
  }
}

// â”€â”€ CalendÃ¡rio MarÃ§o/2026 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CAL = document.getElementById('cal');
// Headers
['Dom','Seg','Ter','Qua','Qui','Sex','SÃ¡b'].forEach(d=>{
  const h=document.createElement('div');h.className='cal-head';h.textContent=d;CAL.appendChild(h);
});

// MarÃ§o comeÃ§a domingo (firstDow=0)
for(let i=0;i<0;i++){const e=document.createElement('div');e.className='day';CAL.appendChild(e);}

const events = {
  1: [['s','Security Scan (4h)']],
  2: [['s','Gateway (2h)'],['b','Roadmap (3h)'],['c','CDMP (17h)']],
  3: [['b','CRM Semanal (17h)']],
  9: [['s','Gateway (2h)'],['b','Roadmap (3h)'],['c','CDMP (17h)']],
  10:[['m','Multi Mensal (4h)'],['b','CRM Semanal (17h)']],
  11:[['b','Reclame Aqui (3h)']],
  14:[['b','Consultores (7h)']],
  16:[['s','Gateway (2h)'],['b','Roadmap (3h)'],['c','CDMP (17h)']],
  17:[['b','CRM Semanal (17h)']],
  23:[['s','Gateway (2h)'],['b','Roadmap (3h)'],['c','CDMP (17h)']],
  24:[['b','CRM Semanal (17h)']],
  26:[['s','Healthcheck']],
  30:[['s','Gateway (2h)'],['b','Roadmap (3h)'],['c','CDMP (17h)']],
  31:[['b','CRM Semanal (17h)']],
};

for(let d=1;d<=31;d++){
  const box=document.createElement('div');
  box.className='day'+(d===2||d===9||d===16||d===23||d===30?' ':' ');
  box.innerHTML=`<div class="dn">${d}</div>`;
  // Daily
  box.innerHTML+=`<span class="ev s">Update 2:55h</span><span class="ev s">Backup 3h</span>`;
  // Specific
  (events[d]||[]).forEach(([cls,lbl])=>{
    box.innerHTML+=`<span class="ev ${cls}">${lbl}</span>`;
  });
  CAL.appendChild(box);
}
</script>
</body>
</html>
